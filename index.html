<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To My Best Friend üíõ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            position: relative;
        }

        /* Particle Effects */
        .particle {
            position: fixed;
            pointer-events: none;
            z-index: 1;
        }

        .heart-particle {
            font-size: 20px;
            animation: float-up 4s ease-in infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0) scale(1);
            }
            50% {
                transform: translateY(-20px) scale(1.1);
            }
        }

        @keyframes float-up {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .sparkle {
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            animation: sparkle 2s ease-in-out infinite;
        }

        @keyframes sparkle {
            0%, 100% {
                opacity: 0;
                transform: scale(0);
            }
            50% {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Container */
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 50px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 10;
        }

        /* Section visibility */
        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.8s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Intro Section */
        .intro-section h1 {
            text-align: center;
            color: #764ba2;
            font-size: 2.5em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .intro-section p {
            text-align: center;
            color: #555;
            font-size: 1.2em;
            margin-bottom: 40px;
        }

        /* Questions Section */
        .question-box {
            text-align: center;
            margin: 40px 0;
        }

        .question-box h2 {
            color: #764ba2;
            font-size: 1.8em;
            margin-bottom: 30px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .button-container {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
            position: relative;
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-yes {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-yes:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.6);
        }

        .btn-no {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            position: absolute;
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }

        .btn-no:hover {
            transform: translateY(-3px);
        }

        /* Heart Burst Effect */
        .heart-burst {
            position: fixed;
            pointer-events: none;
            z-index: 1000;
            font-size: 30px;
            animation: burst 1s ease-out forwards;
        }

        @keyframes burst {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: scale(3) rotate(360deg);
                opacity: 0;
            }
        }

        /* Chat Section */
        .chat-container {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            border-radius: 20px;
            padding: 30px;
            max-height: 500px;
            overflow-y: auto;
        }

        .chat-header {
            text-align: center;
            color: #764ba2;
            font-size: 1.5em;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .message {
            display: flex;
            margin: 15px 0;
            opacity: 0;
            animation: messageSlideIn 0.5s ease forwards;
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .message.sent {
            justify-content: flex-end;
        }

        .message.received {
            justify-content: flex-start;
        }

        .message-bubble {
            max-width: 70%;
            padding: 12px 18px;
            border-radius: 20px;
            font-size: 1em;
            line-height: 1.4;
        }

        .message.sent .message-bubble {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .message.received .message-bubble {
            background: white;
            color: #333;
            border-bottom-left-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 15px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #764ba2;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        /* Pre-Music Message */
        .pre-music-message {
            text-align: center;
            padding: 40px 20px;
        }

        .pre-music-message h2 {
            color: #764ba2;
            font-size: 2em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .pre-music-message p {
            color: #555;
            font-size: 1.3em;
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .pre-music-message .continue-btn {
            padding: 18px 50px;
            font-size: 1.2em;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .pre-music-message .continue-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        /* Music Player - Spotify Style */
        .music-player {
            background: linear-gradient(180deg, #121212 0%, #1a1a1a 100%);
            border-radius: 20px;
            padding: 30px 25px;
            color: white;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .music-player h2 {
            font-size: 1.8em;
            margin-bottom: 8px;
            color: white;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .music-player .artist-name {
            color: #b3b3b3;
            margin-bottom: 25px;
            font-size: 1em;
            font-weight: 400;
        }

        .album-art-container {
            position: relative;
            width: 100%;
            max-width: 320px;
            margin: 0 auto 25px;
        }

        .album-art {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .album-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }

        .album-art-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.4) 50%, transparent 100%);
            padding: 15px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }

        .visualizer {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 3px;
            height: 50px;
        }

        .bar {
            width: 4px;
            background: linear-gradient(to top, #1db954, #1ed760);
            border-radius: 2px;
            animation: visualize 0.8s ease-in-out infinite;
            box-shadow: 0 0 10px rgba(29, 185, 84, 0.5);
        }

        .bar:nth-child(1) { animation-delay: 0s; }
        .bar:nth-child(2) { animation-delay: 0.1s; }
        .bar:nth-child(3) { animation-delay: 0.2s; }
        .bar:nth-child(4) { animation-delay: 0.3s; }
        .bar:nth-child(5) { animation-delay: 0.4s; }
        .bar:nth-child(6) { animation-delay: 0.5s; }
        .bar:nth-child(7) { animation-delay: 0.4s; }
        .bar:nth-child(8) { animation-delay: 0.3s; }
        .bar:nth-child(9) { animation-delay: 0.2s; }
        .bar:nth-child(10) { animation-delay: 0.1s; }

        @keyframes visualize {
            0%, 100% {
                height: 8px;
            }
            50% {
                height: 45px;
            }
        }

        .progress-container {
            margin: 25px 0 15px;
        }

        .progress-bar {
            width: 100%;
            height: 5px;
            background: #4d4d4d;
            border-radius: 3px;
            overflow: hidden;
            cursor: pointer;
            position: relative;
        }

        .progress-bar:hover {
            height: 6px;
        }

        .progress-fill {
            height: 100%;
            background: #1db954;
            width: 0%;
            transition: width 0.1s linear;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .progress-bar:hover .progress-fill::after {
            opacity: 1;
        }

        .time-info {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.75em;
            color: #b3b3b3;
            font-weight: 400;
        }

        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 25px;
        }

        .control-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: transparent;
            color: #b3b3b3;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            color: white;
            transform: scale(1.05);
        }

        .control-btn.play-btn {
            width: 50px;
            height: 50px;
            background: white;
            color: black;
            font-size: 20px;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
        }

        .control-btn.play-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 6px 20px rgba(255, 255, 255, 0.4);
        }

        /* Letter Section */
        .letter-container {
            perspective: 1000px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
        }

        .envelope {
            position: relative;
            width: 300px;
            height: 200px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .envelope:hover {
            transform: scale(1.05);
        }

        .envelope-back {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f093fb, #f5576c);
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .envelope-front {
            position: absolute;
            width: 100%;
            height: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            top: 0;
            border-radius: 10px 10px 0 0;
            transform-origin: top;
            transition: transform 0.8s ease;
            z-index: 2;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .envelope.open .envelope-front {
            transform: rotateX(-180deg);
        }

        .envelope-flap {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-top: 100px solid #764ba2;
            top: 0;
            left: 0;
            z-index: 3;
            transform-origin: top;
            transition: transform 0.8s ease;
        }

        .envelope.open .envelope-flap {
            transform: rotateX(-180deg);
        }

        .letter-paper {
            position: absolute;
            width: 90%;
            height: 160%;
            background: white;
            top: 20%;
            left: 5%;
            border-radius: 8px;
            padding: 30px 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            transform: translateY(0);
            transition: transform 0.8s ease;
            z-index: 1;
            overflow-y: auto;
        }

        .envelope.open .letter-paper {
            transform: translateY(-120%);
        }

        .letter-content {
            text-align: left;
            color: #333;
        }

        .letter-content h3 {
            color: #764ba2;
            font-size: 1.6em;
            margin-bottom: 15px;
            text-align: center;
            font-family: 'Brush Script MT', cursive;
        }

        .letter-content p {
            font-size: 1em;
            line-height: 1.8;
            margin-bottom: 15px;
            font-family: 'Georgia', serif;
        }

        .letter-signature {
            text-align: right;
            margin-top: 30px;
            font-style: italic;
            color: #764ba2;
            font-size: 1.1em;
        }

        .envelope-hint {
            text-align: center;
            margin-top: 30px;
            color: #764ba2;
            font-size: 1.3em;
            font-weight: 600;
            animation: pulse-hint 2s ease-in-out infinite;
        }

        .final-hearts {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 30px;
            font-size: 30px;
            animation: float 3s ease-in-out infinite;
        }

        .volume-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            color: #b3b3b3;
        }

        .volume-icon {
            font-size: 18px;
        }

        .volume-slider {
            width: 100px;
            height: 4px;
            background: #4d4d4d;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
        }

        .volume-fill {
            height: 100%;
            background: white;
            width: 70%;
            border-radius: 2px;
        }

        /* Cards Section */
        .cards-container {
            position: relative;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card {
            position: absolute;
            width: 100%;
            background: linear-gradient(135deg, #fff5f7, #ffe5ec);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            cursor: grab;
            user-select: none;
        }

        .card.swiping {
            cursor: grabbing;
        }

        .card h3 {
            color: #764ba2;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
        }

        .card p {
            color: #555;
            font-size: 1.1em;
            line-height: 1.8;
            text-align: center;
        }

        .card-emoji {
            font-size: 60px;
            text-align: center;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .swipe-hint {
            text-align: center;
            margin-top: 30px;
            color: #764ba2;
            font-size: 1.3em;
            font-weight: 600;
            padding: 15px;
            background: rgba(118, 75, 162, 0.1);
            border-radius: 15px;
            animation: pulse-hint 2s ease-in-out infinite;
        }

        @keyframes pulse-hint {
            0%, 100% {
                transform: scale(1);
                opacity: 0.8;
            }
            50% {
                transform: scale(1.05);
                opacity: 1;
            }
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f0f;
            position: absolute;
            animation: confetti-fall 3s linear infinite;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* Final Section */
        .final-section {
            text-align: center;
        }

        .final-section h2 {
            color: #764ba2;
            font-size: 2.5em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .final-section p {
            color: #555;
            font-size: 1.2em;
            line-height: 1.8;
        }

        .emoji-rain {
            position: fixed;
            pointer-events: none;
            z-index: 999;
            font-size: 25px;
            animation: emoji-fall 4s linear infinite;
        }

        @keyframes emoji-fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0.5;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 30px 20px;
                max-width: 95%;
            }

            .intro-section h1 {
                font-size: 2em;
            }

            .question-box h2 {
                font-size: 1.5em;
                padding: 0 10px;
            }

            .btn {
                padding: 14px 35px;
                font-size: 1.1em;
            }

            .album-art-container {
                max-width: 280px;
            }

            .music-player h2 {
                font-size: 1.5em;
            }

            .card {
                padding: 35px 25px;
            }

            .card h3 {
                font-size: 1.5em;
            }

            .card p {
                font-size: 1em;
            }

            .swipe-hint {
                font-size: 1.2em;
                padding: 12px;
            }

            .envelope {
                width: 280px;
                height: 180px;
            }

            .envelope-flap {
                border-left: 140px solid transparent;
                border-right: 140px solid transparent;
                border-top: 90px solid #764ba2;
            }

            .letter-paper {
                padding: 25px 20px;
                font-size: 0.95em;
            }

            .letter-content h3 {
                font-size: 1.4em;
            }

            .envelope-hint {
                font-size: 1.1em;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 25px 15px;
            }

            .intro-section h1 {
                font-size: 1.8em;
            }

            .question-box h2 {
                font-size: 1.3em;
            }

            .btn {
                padding: 12px 28px;
                font-size: 1em;
            }

            .album-art-container {
                max-width: 260px;
            }

            .music-player {
                padding: 25px 20px;
            }

            .music-player h2 {
                font-size: 1.3em;
            }

            .card {
                padding: 30px 20px;
            }

            .card h3 {
                font-size: 1.3em;
            }

            .card p {
                font-size: 0.95em;
            }

            .card-emoji {
                font-size: 50px;
            }

            .swipe-hint {
                font-size: 1.1em;
            }

            .final-section h2 {
                font-size: 2em;
            }

            .final-section p {
                font-size: 1em;
            }

            .envelope {
                width: 260px;
                height: 170px;
            }

            .envelope-flap {
                border-left: 130px solid transparent;
                border-right: 130px solid transparent;
                border-top: 85px solid #764ba2;
            }

            .letter-paper {
                padding: 20px 15px;
                font-size: 0.9em;
            }

            .letter-content h3 {
                font-size: 1.3em;
            }

            .letter-content p {
                font-size: 0.95em;
            }

            .envelope-hint {
                font-size: 1em;
            }
        }

        /* iPad and tablet specific */
        @media (min-width: 481px) and (max-width: 1024px) {
            .container {
                max-width: 85%;
                padding: 40px 35px;
            }

            .album-art-container {
                max-width: 350px;
            }

            .swipe-hint {
                font-size: 1.4em;
                padding: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Intro Section -->
        <div class="section active intro-section">
            <div style="text-align: center; margin-bottom: 30px;">
                <div style="font-size: 80px; animation: bounce 2s ease-in-out infinite;">üíù</div>
            </div>
            <h1>Hey Bestie! üíõ</h1>
            <p style="font-size: 1.4em; color: #667eea; margin: 20px 0;">You know what? You're absolutely incredible!</p>
            <p style="font-size: 1.1em; line-height: 1.8; color: #555; margin: 25px 0;">
                I created something really special just for you... 
                It's filled with everything I've been wanting to say! ‚ú®
            </p>
            <p style="font-size: 1.2em; color: #764ba2; font-weight: 600; margin-top: 30px;">
                Are you ready for this journey? üåü
            </p>
            <button class="btn btn-yes" onclick="startQuestions()" style="margin-top: 25px; font-size: 1.3em; padding: 18px 45px;">
                Let's Go! ‚ú®
            </button>
        </div>

        <!-- Questions Section -->
        <div class="section questions-section">
            <div class="question-box">
                <h2 id="question-text"></h2>
                <div class="button-container">
                    <button class="btn btn-yes" onclick="handleYes()">Yes! üíñ</button>
                    <button class="btn btn-no" id="noButton" onmouseover="moveNoButton()" onclick="moveNoButton()">No</button>
                </div>
            </div>
        </div>

        <!-- Chat Section -->
        <div class="section chat-section">
            <div class="chat-container" id="chatContainer">
                <div class="chat-header">üí¨ Our Conversation</div>
            </div>
        </div>

        <!-- Pre-Music Message Section -->
        <div class="section pre-music-section">
            <div class="pre-music-message">
                <h2>Wait! Before We Continue... üéµ</h2>
                <p>I have a special song for you. Let it play completely - every second is dedicated to you, my sunshine! ‚òÄÔ∏èüíõ</p>
                <p style="font-size: 1.1em; color: #764ba2; margin-top: 20px;">Ready to feel the love?</p>
                <button class="continue-btn" onclick="showMusicPlayer()">Play The Song üé∂</button>
            </div>
        </div>

        <!-- Music Player Section -->
        <div class="section music-section">
            <div class="music-player">
                <h2>You Are My Sunshine</h2>
                <p class="artist-name">For My Best Friend üíõ</p>
                <div class="album-art-container">
                    <div class="album-art">
                        <img src="https://img.freepik.com/premium-photo/silhouette-two-people-holding-hands_628185-51.jpg" alt="Best Friends" onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'font-size: 80px\'>ü§ù</div>'">
                        <div class="album-art-overlay">
                            <div class="visualizer">
                                <div class="bar"></div>
                                <div class="bar"></div>
                                <div class="bar"></div>
                                <div class="bar"></div>
                                <div class="bar"></div>
                                <div class="bar"></div>
                                <div class="bar"></div>
                                <div class="bar"></div>
                                <div class="bar"></div>
                                <div class="bar"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="time-info">
                        <span id="currentTime">0:00</span>
                        <span id="duration">0:00</span>
                    </div>
                </div>
                <div class="controls">
                    <button class="control-btn play-btn" id="playPauseBtn" onclick="togglePlayPause()">
                        <svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor">
                            <path d="M3 0L16 10L3 20V0Z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Cards Section -->
        <div class="section cards-section">
            <div class="cards-container" id="cardsContainer"></div>
            <div class="swipe-hint">üëâ Swipe or click to see next card</div>
        </div>

        <!-- Letter Section -->
        <div class="section letter-section">
            <h2 style="text-align: center; color: #764ba2; font-size: 2em; margin-bottom: 20px;">One Last Thing... üíå</h2>
            <p style="text-align: center; color: #555; font-size: 1.1em; margin-bottom: 40px;">I wrote you a letter. Click to open it!</p>
            <div class="letter-container">
                <div class="envelope" id="envelope" onclick="openLetter()">
                    <div class="envelope-back"></div>
                    <div class="envelope-flap"></div>
                    <div class="envelope-front"></div>
                    <div class="letter-paper">
                        <div class="letter-content">
                            <h3>To My Dearest Best Friend üíõ</h3>
                            <p>Hey sunshine,</p>
                            <p>If you're reading this, it means you went through this entire journey I created for you. I hope it made you smile, maybe even made you a little emotional (in a good way!).</p>
                            <p>I want you to know that you are not just my best friend - you are my family, my confidant, my partner in crime, and my greatest blessing. Life brought us together, and I'm so grateful for that every single day.</p>
                            <p>There will be tough days ahead, moments when you doubt yourself, times when the world feels heavy. But I want you to remember this: You are stronger than you know, braver than you believe, and more loved than you can imagine.</p>
                            <p>Thank you for being YOU. For your laugh that lights up rooms, for your kindness that touches hearts, for your strength that inspires me, and for your friendship that means the world to me.</p>
                            <p>Keep shining bright, my sunshine. The world needs your light! ‚òÄÔ∏è</p>
                            <p class="letter-signature">Forever your bestie,<br>With all my love üíõ</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="envelope-hint" id="envelopeHint">üëÜ Click the envelope to read your letter</div>
        </div>

        <!-- Final Section -->
        <div class="section final-section">
            <div style="font-size: 100px; margin-bottom: 30px; animation: bounce 2s ease-in-out infinite;">üåü</div>
            <h2>You're My Sunshine! üåû</h2>
            <p style="font-size: 1.3em; margin: 30px 0; line-height: 1.8;">
                Thank you for being the most amazing best friend anyone could ask for. 
                You light up my life in ways you can't even imagine!
            </p>
            <div class="final-hearts">
                <span>üíõ</span>
                <span>‚ú®</span>
                <span>üåü</span>
                <span>üí´</span>
                <span>‚≠ê</span>
            </div>
            <p style="color: #764ba2; font-weight: bold; font-size: 1.4em; margin-top: 40px;">
                Happy Valentine's Day, Bestie! üéâüíñ
            </p>
            <p style="color: #888; font-size: 0.9em; margin-top: 30px; font-style: italic;">
                Made with love, just for you ‚ù§Ô∏è
            </p>
        </div>
    </div>

    <audio id="bgMusic" src="sunshine.mp3" preload="auto"></audio>

    <script>
        // Questions
        const questions = [
            "Do you know you're absolutely amazing? üåü",
            "Ready to see how much you mean to me? üíù",
            "Do you believe in the magic of friendship? ‚ú®"
        ];
        let currentQuestion = 0;

        // Chat messages
        const chatMessages = [
            { type: 'sent', text: 'Hey... I need to tell you something important' },
            { type: 'received', text: 'What happened?' },
            { type: 'sent', text: 'I just want to say... I\'m sorry for all the times I might have hurt you üíî' },
            { type: 'received', text: 'You don\'t have to apologize...' },
            { type: 'sent', text: 'But I do! You mean the world to me üåç' },
            { type: 'sent', text: 'You\'re not just my best friend, you\'re my sunshine on cloudy days ‚òÄÔ∏è' },
            { type: 'received', text: 'You\'re making me emotional! ü•∫' },
            { type: 'sent', text: 'Keep shining bright, because you light up everything around you ‚ú®' },
            { type: 'sent', text: 'You are my sunshine! üåûüíõ' },
            { type: 'received', text: 'Oh really? üòä' }
        ];

        // Cards content
        const cardsData = [
            {
                emoji: 'üíù',
                title: 'You Are Precious',
                text: 'Your kindness, your smile, your energy - everything about you makes this world a better place. Never forget how special you are!'
            },
            {
                emoji: 'ü§ù',
                title: 'My Promise',
                text: 'I promise to always be there for you, through every laugh and every tear. No matter what life throws at us, our friendship will always shine bright!'
            },
            {
                emoji: 'üåà',
                title: 'True Friendship',
                text: 'Real friends don\'t judge, they understand. They don\'t leave, they stay. They don\'t hurt, they heal. That\'s what we have - something truly beautiful! üíõ'
            }
        ];

        let currentCard = 0;
        const audio = document.getElementById('bgMusic');

        // Create floating particles
        function createParticles() {
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'particle heart-particle';
                heart.textContent = ['üíõ', '‚ú®', 'üí´', '‚≠ê'][Math.floor(Math.random() * 4)];
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 3 + 3) + 's';
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 6000);
            }, 800);
        }

        // Start questions
        function startQuestions() {
            switchSection('intro-section', 'questions-section');
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestion < questions.length) {
                document.getElementById('question-text').textContent = questions[currentQuestion];
                resetNoButton();
            }
        }

        function handleYes() {
            createHeartBurst(event);
            currentQuestion++;
            if (currentQuestion < questions.length) {
                setTimeout(showQuestion, 500);
            } else {
                setTimeout(() => {
                    switchSection('questions-section', 'chat-section');
                    startChat();
                }, 500);
            }
        }

        function moveNoButton() {
            const button = document.getElementById('noButton');
            const container = button.parentElement;
            const containerRect = container.getBoundingClientRect();
            
            const maxX = containerRect.width - button.offsetWidth - 100;
            const maxY = 100;
            
            const randomX = Math.random() * maxX;
            const randomY = (Math.random() - 0.5) * maxY;
            
            button.style.left = randomX + 'px';
            button.style.top = randomY + 'px';
        }

        function resetNoButton() {
            const button = document.getElementById('noButton');
            button.style.left = '';
            button.style.top = '';
        }

        function createHeartBurst(event) {
            const hearts = ['üíñ', 'üíï', 'üíó', 'üíì', 'üíù'];
            for (let i = 0; i < 10; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart-burst';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = event.clientX + 'px';
                heart.style.top = event.clientY + 'px';
                heart.style.animationDelay = (i * 0.1) + 's';
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 1000);
            }
        }

        // Chat functionality
        function startChat() {
            const container = document.getElementById('chatContainer');
            let messageIndex = 0;

            function showNextMessage() {
                if (messageIndex < chatMessages.length) {
                    // Show typing indicator for received messages
                    if (chatMessages[messageIndex].type === 'received') {
                        const typingDiv = document.createElement('div');
                        typingDiv.className = 'message received';
                        typingDiv.innerHTML = '<div class="message-bubble typing-indicator"><div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div></div>';
                        container.appendChild(typingDiv);
                        container.scrollTop = container.scrollHeight;

                        setTimeout(() => {
                            typingDiv.remove();
                            addMessage(chatMessages[messageIndex]);
                            messageIndex++;
                            setTimeout(showNextMessage, 1500);
                        }, 1000);
                    } else {
                        addMessage(chatMessages[messageIndex]);
                        messageIndex++;
                        setTimeout(showNextMessage, 1500);
                    }
                } else {
                    setTimeout(() => {
                        switchSection('chat-section', 'pre-music-section');
                    }, 2000);
                }
            }

            function addMessage(msg) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${msg.type}`;
                messageDiv.innerHTML = `<div class="message-bubble">${msg.text}</div>`;
                container.appendChild(messageDiv);
                container.scrollTop = container.scrollHeight;
            }

            showNextMessage();
        }

        // Show music player
        function showMusicPlayer() {
            switchSection('pre-music-section', 'music-section');
            setTimeout(() => {
                audio.play();
                updateProgress();
                updatePlayPauseIcon(true);
            }, 500);
        }

        // Music player functions
        function togglePlayPause() {
            const btn = document.getElementById('playPauseBtn');
            if (audio.paused) {
                audio.play();
                updatePlayPauseIcon(true);
            } else {
                audio.pause();
                updatePlayPauseIcon(false);
            }
        }

        function updatePlayPauseIcon(isPlaying) {
            const btn = document.getElementById('playPauseBtn');
            if (isPlaying) {
                btn.innerHTML = `<svg width="16" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <rect x="6" y="4" width="4" height="16" rx="1"/>
                    <rect x="14" y="4" width="4" height="16" rx="1"/>
                </svg>`;
            } else {
                btn.innerHTML = `<svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor">
                    <path d="M3 0L16 10L3 20V0Z"/>
                </svg>`;
            }
        }

        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const currentTimeEl = document.getElementById('currentTime');
            const durationEl = document.getElementById('duration');

            audio.addEventListener('loadedmetadata', () => {
                durationEl.textContent = formatTime(audio.duration);
            });

            audio.addEventListener('timeupdate', () => {
                const progress = (audio.currentTime / audio.duration) * 100;
                progressFill.style.width = progress + '%';
                currentTimeEl.textContent = formatTime(audio.currentTime);
            });

            audio.addEventListener('ended', () => {
                switchSection('music-section', 'cards-section');
                initCards();
                createEmojiRain();
            });
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        // Cards functionality
        function initCards() {
            const container = document.getElementById('cardsContainer');
            container.innerHTML = '';

            cardsData.forEach((card, index) => {
                const cardEl = document.createElement('div');
                cardEl.className = 'card';
                cardEl.style.zIndex = cardsData.length - index;
                cardEl.innerHTML = `
                    <div class="card-emoji">${card.emoji}</div>
                    <h3>${card.title}</h3>
                    <p>${card.text}</p>
                `;

                let startX = 0;
                let currentX = 0;

                cardEl.addEventListener('mousedown', startSwipe);
                cardEl.addEventListener('touchstart', startSwipe);

                function startSwipe(e) {
                    if (index !== currentCard) return;
                    startX = e.type === 'mousedown' ? e.clientX : e.touches[0].clientX;
                    cardEl.classList.add('swiping');
                    document.addEventListener('mousemove', duringSwipe);
                    document.addEventListener('touchmove', duringSwipe);
                    document.addEventListener('mouseup', endSwipe);
                    document.addEventListener('touchend', endSwipe);
                }

                function duringSwipe(e) {
                    currentX = e.type === 'mousemove' ? e.clientX : e.touches[0].clientX;
                    const diff = currentX - startX;
                    cardEl.style.transform = `translateX(${diff}px) rotate(${diff * 0.1}deg)`;
                }

                function endSwipe() {
                    cardEl.classList.remove('swiping');
                    document.removeEventListener('mousemove', duringSwipe);
                    document.removeEventListener('touchmove', duringSwipe);
                    document.removeEventListener('mouseup', endSwipe);
                    document.removeEventListener('touchend', endSwipe);

                    const diff = currentX - startX;
                    if (Math.abs(diff) > 100) {
                        cardEl.style.transform = `translateX(${diff > 0 ? 1000 : -1000}px) rotate(${diff > 0 ? 30 : -30}deg)`;
                        cardEl.style.opacity = '0';
                        setTimeout(() => {
                            cardEl.remove();
                            currentCard++;
                            if (currentCard >= cardsData.length) {
                                setTimeout(() => {
                                    switchSection('cards-section', 'letter-section');
                                    createEmojiRain();
                                }, 500);
                            }
                        }, 500);
                    } else {
                        cardEl.style.transform = '';
                    }
                }

                cardEl.addEventListener('click', () => {
                    if (index === currentCard) {
                        cardEl.style.transform = 'translateX(1000px) rotate(30deg)';
                        cardEl.style.opacity = '0';
                        setTimeout(() => {
                            cardEl.remove();
                            currentCard++;
                            if (currentCard >= cardsData.length) {
                                setTimeout(() => {
                                    switchSection('cards-section', 'letter-section');
                                    createEmojiRain();
                                }, 500);
                            }
                        }, 500);
                    }
                });

                container.appendChild(cardEl);
            });
        }

        // Open letter function
        function openLetter() {
            const envelope = document.getElementById('envelope');
            const hint = document.getElementById('envelopeHint');
            
            if (!envelope.classList.contains('open')) {
                envelope.classList.add('open');
                hint.style.display = 'none';
                createHeartRain();
                
                setTimeout(() => {
                    setTimeout(() => {
                        switchSection('letter-section', 'final-section');
                        createConfetti();
                    }, 8000); // Give time to read the letter
                }, 1000);
            }
        }

        function createHeartRain() {
            const hearts = ['üíõ', 'üíñ', 'üíï', 'üíó', 'üíì'];
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'emoji-rain';
                    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = Math.random() * 100 + 'vw';
                    heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
                    heart.style.animationDelay = Math.random() + 's';
                    document.body.appendChild(heart);
                    setTimeout(() => heart.remove(), 6000);
                }, i * 100);
            }
        }

        // Effects
        function createEmojiRain() {
            const emojis = ['üíõ', '‚ú®', 'üåü', '‚≠ê', 'üí´'];
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.className = 'emoji-rain';
                    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    emoji.style.left = Math.random() * 100 + 'vw';
                    emoji.style.animationDuration = (Math.random() * 2 + 3) + 's';
                    emoji.style.animationDelay = Math.random() + 's';
                    document.body.appendChild(emoji);
                    setTimeout(() => emoji.remove(), 5000);
                }, i * 200);
            }
        }

        function createConfetti() {
            const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#ffd700'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    confetti.style.animationDelay = Math.random() + 's';
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 4000);
                }, i * 50);
            }
        }

        function switchSection(from, to) {
            document.querySelector(`.${from}`).classList.remove('active');
            document.querySelector(`.${to}`).classList.add('active');
        }

        // Initialize
        createParticles();
    </script>
</body>
</html>
